!function(a){a.espacoGuerra=a.espacoGuerra||{},function(a){for(var b=0,c=["webkit","moz","o","ms"],d=0;d<c.length&&!a.requestAnimationFrame;++d)a.requestAnimationFrame=a[c[d]+"RequestAnimationFrame"],a.cancelAnimationFrame=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b)),f=a.setTimeout(function(){c(d+e)},e);return b=d+e,f}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){clearTimeout(a)})}(window),a.espacoGuerra.util=function(){var a=function(a,b){var c=b.match(/^([^:]+):\/\//),d=null===c?null:c[1];return null===c?a+"://"+b:d===a?b:b.replace(d,a)};return{forceProtocol:a}}();var b=function(){var a=function(a,b){var c=b.getContext("2d"),d=[b.width,b.height],e=function(b){var e=a.bodies[b],f=e.position.map(function(b,c){var e=b*d[c]/a.dimensions[c];return e+d[c]/2}),g=e.diameter*d[0]/a.dimensions[0];c.beginPath(),c.arc(f[0],f[1],g,0,2*Math.PI),c.stroke(),c.fillText(b,f[0],f[1]+g+16)},f=function(){c.clearRect(0,0,b.width,b.height),c.font="bold 16px Arial",c.textAlign="center";for(var d in a.bodies)a.bodies.hasOwnProperty(d)&&e(d)};return{paint:f}},b=function(b,c){var d=a(b,c);d.paint()};return{paintOn:b}},c=function(c,d){var e,f=c,g={},h=b(),i=function(a){g=a},j=function(){f&&(h.paintOn(g,f),d(j))},k=function(a){e=a,e.onmessage=function(a){i(JSON.parse(a.data))}};d(j);var l=function(){e&&(e.close(),e=null),f&&(a(f).remove(),f=null)};return{listenTo:k,exit:l}},d=function(b){var c=a("<canvas></canvas>");return c.attr("width","800px"),c.attr("height","600px"),c.attr("id","canvas"),b.append(c),"undefined"!=typeof G_vmlCanvasManager?a(G_vmlCanvasManager.initElement(c[0])):c[0]};a.espacoGuerra.joinGame=function(b,e){var f=new WebSocket(a.espacoGuerra.util.forceProtocol("ws",e)),g=d(a(b)),h=c(g,window.requestAnimationFrame);return h.listenTo(f),h}}(jQuery);